<!-- inline css -->

<style>
body {
  background-color: #E34E53}
.card-dashboard {
  background-color: white;
  border-radius: 5px;
  padding: 12px;
  margin-top: 12px;
  text-align: center; }
.container-header {
  display: flex;
  border-bottom: :1px white; }
.header {
  margin: auto;
  margin-left: 12px;
  font-size: 20px;
  font-weight: bold; }
.container-dashboard-button {
  display: flex;
  padding: 6px;
}
section {
  background-color: #E34E53;
  background-size: 30% 100%;
}
h1 {
  color: white;
}
h2 {
  margin: auto;
  margin-left: 12px;
  font-size: 16px;
  font-weight: bold;}
h3 {
  margin: auto;
  font-size: 14px;
  font-weight: bold; }
p {
  margin: auto;
  font-size: 12px; }
a {
  margin: auto;
  font-size: 12px;
}
/*.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 120px;
    background-color: #E34E53;
    z-index: -1;
}*/
</style>

<!-- Html -->

<div class="container-main">
<!--   <div class="background">
  </div> -->
  <div class="container-header">
  <!-- Add this line if you need the menu -->
     <label for="offcanvas" class="toggler"><span class="avatar"></span></label>
      <h1 class ="header">Welcome <%= user.first_name %></h1>
  </div>

    <% if wallets.empty? %>
      <div class="card-dashboard">
        <p>This is pretty empty here, let's add your first kid</p>
      </div>
    <% else %>
      <% wallets.each do |wallet| %>
      <div class="card-dashboard">
      <!-- Header Tom -->
        <div class="container-header">
         <div>
             <%= cl_image_tag wallet.kid.avatar, crop: :fill, class: "avatar" %>
          </div>
          <h2><%= wallet.kid.first_name %>'s Wallet</h2>
        </div>

      <!--  notification div -->
      <% if wallet.payout_amount != 0 %>
      <div class="payout-notification">

        <div class="card-dashboard d-flex justify-content-between">
          <div class="container-header">
            <p><%= wallet.kid.username %> completed his exercise, it's paytime! Give <%= wallet.payout_amount %>â‚¬ to him/her. </p>
          </div>
          <div>
            <button class= "button-red button-confirm"> CONFIRM </button>
          </div>

        </div>

      </div>
      <% end %>



      <!-- Pocket Money div -->
          <div>
             <h3>Pocket money summary</h3>
             <p>Pocket money : <%= wallet.total_allowance %>$</p>
             <p>Frequency : <%= wallet.payout_frequency %></p>
             <p>Each : <%= wallet.payout_day %></p>
             <% if policy(wallet).edit? %>
               <div class="container-dashboard-button">
                 <%= link_to "SEE #{wallet.kid.first_name.upcase} DASHBOARD", dashboard_user_path(wallet.kid.id), class: "button-red" %>
               </div>
             <% end %>
             <% if policy(current_user).dashboard? %>
               <div class="container-dashboard-button">
                 <%= link_to "CHANGE #{wallet.kid.first_name.upcase} ALLOWANCE", edit_wallet_path(wallet.id), class: "button-white" %>
               </div>
            <% end %>
              <% if policy(wallet.kid).destroy? %>
                <div class="container-dashboard-button">
                  <%= link_to "DELETE KID", destroy_user_path(wallet.kid.id), method: :delete, class: "button-white" %>
                </div>
            <% end %>
          </div>
        <!-- Goals div -->
          <div>
            <% unless wallet.goals.empty? %>
             <h3>Savings for goals</h3>
               <% wallet.goals.each do |goal| %>
                 <p>Saving for : <%= goal.name %></p>
                 <p>Goal price : <%= goal.goal_price %>$</p>
                 <p>Weekly savings : <%= goal.goal_allowance %>$</p>
                 <p>Saved so far :<%= goal.goal_current_saving %>$</p>
               <% end %>
          </div>
          <% end %>

       <!--  Learning div -->

       <% unless wallet.kid.user_courses.empty? %>
       <% wallet.kid.user_courses.each do |user_course| %>
          <div>
             <h3>Progress summary</h3>
             <p>Enrolled : <%= user_course.course.name %></p>
             <p>Last Level : <%= user_course.last_level %></p>
             <p>Last question : <%= user_course.last_question %></p>
             <p>Last lecture : <%= user_course.last_lecture %></p>
             <p>Course complete?: <%= user_course.complete %></p>
          </div>

       <% end %>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>
</div>
    <div class="container-dashboard-button">
      <%= link_to "ADD NEW KID", new_user_path, class: "button-white" %>
    </div>
  </div>



<script>
  const payoutNotification = document.querySelector(".payout-notification")
  const confirmButton = document.querySelector(".button-confirm")
  confirmButton.addEventListener("click", () => {
    console.log('test');
        payoutNotification.style.display = "none"
      }
  )
</script>

